<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scaler Social</title>

    <link rel="stylesheet" href="style.css">

    <script src="script.js"></script>
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="navbar-item">
                <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/033/original/SST_Logo.png?1706888781" alt="Scaler School of Technology">
            </div>
            <div class="navbar-item">
                <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/032/original/scaler-social.png?1706888764" alt="Scaler Social">
            </div>
        </nav>
    </header>

    <div class="container">
        <section class="post-section">
            <div class="post-group">
                <h1 class="header-text">
                    Post your thoughts here
                </h1>

                <div class="post-card">
                    <div class="post-card-content">
                        <div class="image">
                            <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/031/original/profile_image.png?1706888739" alt="Profile Image">
                        </div>

                        <textarea name="post-content-input" id="post-content-input" maxlength="100" placeholder="Type your thoughts here..." oninput="document.getElementById('post-char-used').innerHTML = this.value.length;"></textarea>
                    </div>

                    <div class="post-card-push">
                        <div class="text-limit">
                            <span id="post-char-used">0</span> / 100
                        </div>

                        <button class="button" id="post-push-button" onclick="pushPost('feeds');">
                            Post
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <section class="feed-section">
            <h1 class="header-text">
                Your Feed
            </h1>

            <div class="cards-container" id="feeds">
                <div class="card" id="${card_id}">
                    <div class="card-main">
                        <div class="card-author-image">
                            <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/031/original/profile_image.png?1706888739" alt="Profile Image">
                        </div>
        
                        <div class="card-content">
                            <div class="card-texts">
                                <div class="card-header">
                                    <div class="card-user-info">
                                        <h3 class="card-user-name">Joanne Graham</h3>
                                        <span class="card-user-id">@joannegraham123</span>
                                    </div>
        
                                    <div class="card-controls">
                                        <button class="card-controls-button">
                                            <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/028/original/edit.png?1706888661" alt="Edit">
                                        </button>
        
                                        <button class="card-controls-button" onclick="deleteComment('${card_id}');">
                                            <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/027/original/delete.png?1706888643" alt="Delete">
                                        </button>
                                    </div>
                                </div>
        
                                <textarea class="card-message" oninput="updateEditCharCounter(this);">card_message</textarea>
                            </div>
        
                            <div class="card-interactions">
                                <button class="card-interactions-button">
                                    <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/026/original/comment.png?1706888619" alt="Comment">
                                </button>
        
                                <button class="card-interactions-button like-button" onclick="toggleLike('${card_id}');">
                                    <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/029/original/heart.png?1706888679" alt="Like">
                                </button>
                            </div>

                            <div class="card-edit">
                                <div class="text-limit">
                                    <span class="edit-char-used">0</span> / 100
                                </div>
       
                                <div class="card-edit-ctx">
                                    <button class="button edit-cancel-button" onclick="pushPost('feeds');">
                                        Cancel
                                    </button>
                                    <button class="button edit-push-button" onclick="pushPost('feeds');">
                                        Edit
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-comments" id="comments-card_id"></div>
                </div>
            </div>
        </section>
    </div>

    <dialog id="delete-modal">
        <div class="confirm-box">
            <div class="confirm-box-header">
                <img src="https://d2beiqkhq929f0.cloudfront.net/public_assets/assets/000/064/030/original/delete-color-filled.png?1706888714" alt="Delete">
                <button class="confirm-box-header-button" onclick="this.parentElement.parentElement.parentElement.open = false;">
                    X
                </button>
            </div>
            <div class="confirm-message">
                Are you sure you want to permanently delete this tweet?
            </div>
            <div class="confirm-ctx">
                <button class="cancel-button" onclick="this.parentElement.parentElement.parentElement.open = false;">Cancel</button>
                <button class="delete-button" onclick="document.getElementById('${card_id}').remove(); this.parentElement.parentElement.parentElement.open = false;">Delete</button>
            </div>
        </div>
    </dialog>
</body>
<script>
    loadData();
    document.querySelectorAll(".card-message").forEach(txa => {
        txa.style.height = txa.scrollHeight + "px";
        updateEditCharCounter(txa);
    })
</script>
</html>